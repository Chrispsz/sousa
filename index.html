<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Video Streaming</title>
    <!-- Inclua o CSS do Video.js -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: #000;
        }
        .video-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .video-js {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover;
        }
        #error-message {
            color: red;
            text-align: center;
            position: absolute;
            bottom: 20px;
            width: 100%;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="video-container">
        <!-- Elemento de vídeo -->
        <video
            id="my-video"
            class="video-js vjs-default-skin vjs-big-play-centered"
            controls
            preload="auto"
            autoplay
            muted
            data-setup='{
                "liveui": true,
                "techOrder": ["html5"],
                "playbackRates": [0.5, 1, 1.5, 2],
                "controlBar": {
                    "volumePanel": {"inline": false},
                    "pictureInPictureToggle": true
                }
            }'>
            <source src="https://live-ak.vimeocdn.com/exp=1743365863~acl=%2F1f08be1d-e8c0-4229-9585-e3b82dea5779_fmp4%2F%2A~hmac=d77bd5718326f2cf720631820ad83952e2ae2bfc1cb273c2a501c1f3686b24dc/1f08be1d-e8c0-4229-9585-e3b82dea5779_fmp4/hls.m3u8" type="application/x-mpegURL" />
            <p class="vjs-no-js">
                Para visualizar este vídeo, habilite o JavaScript e considere atualizar para um navegador que suporte HTML5.
            </p>
        </video>
        <!-- Elemento para exibir mensagens de erro -->
        <div id="error-message"></div>
    </div>

    <!-- Inclua o JavaScript do Video.js -->
    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    <script>
        // Configuração do player de vídeo
        const player = videojs('my-video', {
            fluid: true, // Faz o vídeo se ajustar ao tamanho do container
            responsive: true, // Garante responsividade
            liveTracker: {
                trackingThreshold: 0 // Melhora a experiência de streaming ao vivo
            }
        });

        // Função para entrar em tela cheia automaticamente
        function enterFullScreen() {
            const videoElement = document.getElementById('my-video');
            if (videoElement.requestFullscreen) {
                videoElement.requestFullscreen();
            } else if (videoElement.mozRequestFullScreen) { // Firefox
                videoElement.mozRequestFullScreen();
            } else if (videoElement.webkitRequestFullscreen) { // Chrome, Safari, Opera
                videoElement.webkitRequestFullscreen();
            } else if (videoElement.msRequestFullscreen) { // IE/Edge
                videoElement.msRequestFullscreen();
            } else if (videoElement.webkitEnterFullscreen) { // iOS Safari
                videoElement.webkitEnterFullscreen();
            }
        }

        // Listener para iniciar a reprodução e entrar em tela cheia
        player.on('play', function() {
            enterFullScreen();
            const errorMessageDiv = document.getElementById('error-message');
            errorMessageDiv.innerHTML = ''; // Limpa mensagens de erro se o vídeo começar a tocar
        });

        // Listener para erros
        player.on('error', function() {
            const error = player.error();
            const errorMessageDiv = document.getElementById('error-message');
            if (error) {
                errorMessageDiv.innerHTML = `Erro ao reproduzir o vídeo: ${error.message}`;
            }
        });

        // Tenta iniciar a reprodução automaticamente
        player.ready(function() {
            player.play().catch(function(error) {
                console.log('Erro ao tentar reproduzir automaticamente:', error);
            });
        });
    </script>
</body>
</html>
